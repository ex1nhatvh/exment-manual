# ワークフロー設定例
Exmentで使用する、ワークフローの設定例をいくつかご紹介します。

- [申請 → 承認・却下](#example1)  
データの申請、承認・却下を行う、シンプルなフローのご紹介です。  


- [申請 → 部長承認or課長承認・却下](#example2)  
申請したデータの金額に応じて、アクションの振り分け、担当者の変更を行う場合の、設定方法のご紹介です。  


- [データのロック](#example3)  
特定のデータをロック(編集・削除不可)させたい場合の、設定方法のご紹介です。  




<h2 id="example1">ワークフロー設定例 - 申請 → 承認・却下</h2>
データの申請、承認・却下を行う、シンプルなフローの設定方法です。  

![ワークフロー画面](img/workflow/workflow1.png)  
- ユーザーは、管理部に申請する
- 管理部は、申請を承認する。もしくは却下する
- 承認されたデータは、以降修正することはできない


### Step1.ステータス設定

![ワークフロー画面](img/workflow/workflow_status1.png)  

- **ワークフロー表示名** : 任意の名称

- **ワークフロー種類** : 「汎用」

- **開始ステータス名** : 「未実施」

- **ステータス 1行目**  
ステータス名：「申請中」  
データの編集不可：「YES」  

- **ステータス 2行目**  
ステータス名：「完了」  
データの編集不可：「YES」  


### Step2.アクション設定

![ワークフロー画面](img/workflow/workflow_action0.png)  

- **アクション設定 1行目**  
アクション名：「申請」  
実行前ステータス：「未実施」  
アクション設定 > 実行後ステータス：「申請中」  
実行可能ユーザー : 「作成ユーザー」  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「任意」  


- **アクション設定 2行目**  
アクション名：「承認」  
実行前ステータス：「申請中」  
アクション設定 > 実行後ステータス：「完了」  
実行可能ユーザー : 「管理グループ」※あらかじめ、組織「管理グループ」を作成してください  
オプション設定 > 次のステータスへ進む条件 : 「2人以上実行」  
オプション設定 > コメント : 「任意」  
オプション設定 > 特殊なアクション : チェックなし  


- **アクション設定 3行目**  
アクション名：「却下」  
実行前ステータス：「申請中」  
アクション設定 > 実行後ステータス：「未実施」  
実行可能ユーザー : 「管理グループ」※あらかじめ、組織「管理グループ」を作成してください  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「必須」  
オプション設定 > 特殊なアクション : チェックあり  











<h2 id="example2">申請 → 部長承認or課長承認・却下</h2>
申請したデータの金額に応じて、アクションの振り分け、担当者の変更を行う場合の、設定方法のご紹介です。    

![ワークフロー画面](img/workflow/workflow_example2_0.png)
  
- ユーザーは、経費の申請を行う
- 申請データの「金額」が100,000円以上であれば部長に、100,000円未満であれば課長に、自動的に振り分けられる
- 部長もしくは課長は、申請を承認する。もしくは却下する
- 承認されたデータは、以降修正することはできない


### Step1.ステータス設定

![ワークフロー画面](img/workflow/workflow_example2_1.png)  

- **ワークフロー表示名** : 任意の名称

- **ワークフロー種類** : 「テーブル専用」

- **テーブル** : ワークフローを実施するテーブルを選択

- **開始ステータス名** : 「未申請」

- **ステータス 1行目**  
ステータス名：「部長申請中」  
データの編集不可：「YES」  

- **ステータス 2行目**  
ステータス名：「課長申請中」  
データの編集不可：「YES」  

- **ステータス 3行目**  
ステータス名：「完了」  
データの編集不可：「YES」  


### Step2.アクション設定

![ワークフロー画面](img/workflow/workflow_example2_2.png)  

- **アクション設定 1行目**  
アクション名：「申請」  
実行前ステータス：「未申請」  
アクション設定 > 実行後ステータス：下記画像を参照  

![ワークフロー画面](img/workflow/workflow_example2_3.png)  

実行可能ユーザー : 「作成ユーザー」  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「任意」  


- **アクション設定 2行目**  
アクション名：「承認」  
実行前ステータス：「部長申請中」  
アクション設定 > 実行後ステータス：「完了」  
実行可能ユーザー : 「部長」※あらかじめ、組織「部長」を作成してください  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「任意」  
オプション設定 > 特殊なアクション : チェックなし  


- **アクション設定 3行目**  
アクション名：「承認」  
実行前ステータス：「課長申請中」  
アクション設定 > 実行後ステータス：「完了」  
実行可能ユーザー : 「課長」※あらかじめ、組織「課長」を作成してください  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「任意」  
オプション設定 > 特殊なアクション : チェックなし  


- **アクション設定 4行目**  
アクション名：「却下」  
実行前ステータス：「部長申請中」  
アクション設定 > 実行後ステータス：「未実施」  
実行可能ユーザー : 「部長」※あらかじめ、組織「部長」を作成してください  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「必須」  
オプション設定 > 特殊なアクション : チェックあり  


- **アクション設定 5行目**  
アクション名：「却下」  
実行前ステータス：「課長申請中」  
アクション設定 > 実行後ステータス：「未実施」  
実行可能ユーザー : 「課長」※あらかじめ、組織「課長」を作成してください  
オプション設定 > 次のステータスへ進む条件 : 「1人以上実行」  
オプション設定 > コメント : 「必須」  
オプション設定 > 特殊なアクション : チェックあり  

