# 役割・権限
Exmentでは、「役割」ならびに「権限」の考え方を持ちます。  
これはExmentにおいて、特定のデータを特定のユーザーの管理できるようにするために、重要な考え方です。  

新規にユーザーを追加し、そのユーザーがログインを行った場合、そのログインユーザーは、ほとんどの機能を使用できません。  
その場合、システム管理者は、新規追加したログインユーザーに、適切に役割を割り振る必要があります。  

以下、Exmentの「役割」ならびに「権限」について記載します。

## 権限(パーミッション)
権限とは、Exmentにおける特定の動作を実施してよいかの可否を決めるものです。  
例えば、以下のような権限があります。
- システム情報: システム全体の設定を行うための権限
- すべてのデータの編集: 特定のテーブル上の、すべてのデータを追加・編集・削除できる権限
- 担当者データの閲覧: 自分が担当者となっているデータの、閲覧ができる権限

これらの権限が設定されているユーザーは、その設定されている動作を実施可能です。  
一方で、権限が設定されていないユーザーが、設定されている動作を実施しようとした場合、権限エラーになります。  

## 役割(ロール)
役割とは、上記の権限をグループ化したものになります。  
複数の権限をまとめ、「役割」という名称でグループ化します。  
![役割・権限](img/role/role1.png)
  
管理者は、この役割に対し、Exmentのユーザーまたは組織を設定していきます。  
![役割・権限](img/role/role2.png)


## 役割の種類と一覧
Exmentにインストール時に設定されている、役割の種類と、役割の一覧を記載します。
役割の種類ごとに記載します。

### システム
Exment全体の操作を決定することができる役割です。  
あらゆる操作を可能にするシステム管理者、各テーブルのデータをすべて閲覧・編集するデータ管理者があります。  

#### 役割一覧
- システム管理者 : Exmentにおけるすべての管理や操作が実行可能な役割です。  
Exment初期設定時に設定したID・パスワードのユーザーは、この「システム管理者」の役割をもちます。  

- データ管理者 : すべてのカスタムテーブルの、すべてのデータの追加・編集・削除が可能な役割です。


### テーブル
Exmentでは、データを管理するためのテーブルを作成する事ができます。  
そのテーブルごとに、ユーザーに役割を割り振ることができます。  
例えば、以下のような利用方法があります。  
    - 営業部のユーザーは、テーブル「営業活動」のすべてのデータを編集・閲覧することができる。
    - 技術部のユーザーは、テーブル「技術管理」のすべてのデータを編集・閲覧することができる。
    - パートナー会社のユーザーは、テーブル「発注依頼」の、自分に権限があるデータのみ閲覧する事ができる。

#### 役割一覧
- 管理者 : 指定したカスタムテーブルに対して、テーブル定義やフォームの修正などが可能です。  
また、指定したカスタムテーブル内の、すべてのデータの追加・編集・削除が可能な役割です。

- 全データ編集者 : 指定したカスタムテーブル内の、すべてのデータの追加・編集・削除が可能な役割です。

- 全データ閲覧者 : 指定したカスタムテーブル内の、すべてのデータの閲覧が可能な役割です。  
※データの編集・削除はできません。

- 編集者 : 指定したカスタムテーブル内の、ログインユーザー自身が担当者に設定されているデータの追加・編集・削除が可能な役割です。  

- 閲覧者 : 指定したカスタムテーブル内の、ログインユーザー自身が担当者に設定されているデータの閲覧が可能な役割です。  
※データの編集・削除はできません。


### データ
テーブルごとに作成するデータ1件1件に、ユーザーの役割を割り振ることができます。  
例えば、以下のような利用方法があります。  
    - ID1のデータは、パートナー会社Aに関するデータなので、パートナー会社Aのユーザーのみ編集・閲覧できるようにする。
    - ID2のデータは、パートナー会社Bに関するデータなので、パートナー会社Bのユーザーのみ編集・閲覧できるようにする。

#### 役割一覧
- 編集者 : ログインユーザー自身が担当者に設定されているデータの追加・編集・削除が可能な役割です。  

- 閲覧者 : ログインユーザー自身が担当者に設定されているデータの閲覧が可能な役割です。  
※データの編集・削除はできません。


## (参考)役割・権限設定による画面の変化
権限設定を行った場合に、画面やデータの表示がどのように変化するのかどうかを記載します。  

- Exmentの初期設定時に、管理者ユーザーのID、パスワードなどを入力します。
![役割・権限](img/role/role3.png)

- 初期設定後、管理者ユーザーは、「システム管理者」として登録されています。
![役割・権限](img/role/role4.png)

- 管理者ユーザーは、Exmentのすべての機能を使用できます。
![役割・権限](img/role/role5.png)

- [ユーザー](/ja/user)画面、ならびに[ログインユーザー](/ja/user?id=ログインユーザー管理)画面にて、新規に一般ユーザーを作成します。
![役割・権限](img/role/role6.png)

- また、管理者ユーザーで、[テンプレート]機能にて「プロジェクト・タスク管理」をインストールします。
![役割・権限](img/role/role7.png)

- システム管理者は、すべての機能を利用できるので、管理者ユーザーで「プロジェクト管理」「タスク管理」にデータを追加します。
![役割・権限](img/role/role8.png)  
![役割・権限](img/role/role9.png)  

- ここで、別のブラウザを使用し、先ほど作成した「一般ユーザー」でログインを行います。    
![役割・権限](img/role/role10.png)  

- 左メニューには、ほとんどのメニュー項目が表示されていません。
これは、ユーザーを作成したばかりの状態なので、まだ「一般ユーザー」には役割を振られていないためです。  
※「お知らせ」は、テーブル設定画面で「すべてのユーザーが閲覧可能」がYESになっているため、表示されます。  
![役割・権限](img/role/role11.png)  

- そのため、まずは管理者ユーザーが、一般ユーザーに「プロジェクト管理」「タスク管理」を管理できるよう、役割を設定する必要があります。  

- 操作を管理者ユーザーに戻し、「カスタムテーブル」画面に遷移します。  
その後、「プロジェクト管理」の行をクリックします。    
![役割・権限](img/role/role12.png)  

- ページ下部の「権限設定」画面にて、役割を追加します。  
今回は、「一般ユーザー」に、「編集者(ユーザー)」の役割を追加します。
![役割・権限](img/role/role13.png)  

- 設定が完了したら、保存します。  
その後、「タスク管理」テーブルでも、同様の設定を行います。

- 操作を再度、一般ユーザーで行います。  
一度ログアウトを行い、再度ログインすると、  

