# カスタムテーブル設定
Exmentでは、情報管理を行うためのテーブル「カスタムテーブル」を使用します。  
カスタムテーブルを使用するためには、あらかじめ設定が必要です。

## 一覧
- メニューにある「カスタムテーブル」を選択します。  
- もしくは、以下のURLにアクセスしてください。  
http(s)://(ExmentのURL)/admin/table  

これにより、作成してあるカスタムテーブル設定の一覧画面が表示されます。  

![カスタムテーブル画面](img/table/table_grid.png)

※「基本情報」「ユーザー」「組織」「メールテンプレート」「メール送信履歴」「お知らせ」  
これらのテーブルはExmentインストール時に初期設定されています。  
その他、テンプレートとしてインポートしているテーブルも一覧画面に表示されます。  

## 新規作成
#### カスタムテーブル新規追加の手順  

- 一覧画面右上の「新規」ボタンをクリックします。
![カスタムテーブル画面](img/table/table_new1.png)  
  
- テーブル作成画面が表示されるので、必要事項を入力します。
![カスタムテーブル画面](img/table/table_new2_2.png)

## 設定項目の詳細

#### テーブル名(英数字) ※必須
- テーブルの名前を表します。(例：user , information , estimate )  
- テーブルを開いた際のURLなどで設定した英数字が使用されます。(例：http(s)://(ExmentのURL)/public/admin/data/user )  
- 使用できるのは、半角英数字と記号の "-" と "_" です。
- 他のテーブルで使用しているテーブル名は使用できません。  
- テーブル名の文字数は30文字以内、テーブル名の先頭は英字を指定してください。  
- テーブルの新規作成時にのみ設定できます。保存後は変更できません。  

![カスタムテーブル画面](img/table/table_detail1.png)

####  テーブル表示名 ※必須
- 画面に表示する名称です。日本語の使用も可能です。(例：ユーザー 、お知らせ 、見積 )  

![カスタムテーブル画面](img/table/table_detail2.png)  

#### 説明
- テーブルに関する説明です。

![カスタムテーブル画面](img/table/table_detail3.png)
- （例）のように、データ画面においてテーブル表示名の右に入力した文章が表示されます。  

（例）
![カスタムテーブル画面](img/table/table_detail3_sample.png)

#### 表示順
- そのテーブルの色を設定します。ここで設定した色は、検索時のサジェストなどで使用します。  

![カスタムテーブル画面](img/table/table_detail4.png)


#### アイコン
- そのテーブルのアイコンを設定します。ここで設定したアイコンは、メニューのデフォルトのアイコンや、検索結果のアイコンとして表示します。  

![カスタムテーブル画面](img/table/table_detail6.png)

#### 検索可能
- 検索画面から検索を行う場合に、そのテーブルを検索対象とするかどうかを設定します。既定値はYESです。  
隠しテーブルにしたい場合など、検索結果から除外したい時に、NOに設定してください。

![カスタムテーブル画面](img/table/table_detail7.png)

#### IDをラベルに使用する
- 

![カスタムテーブル画面](img/table/table_detail8.png)

#### 1件のみ登録可能
- データを複数件登録せず、1件のみ許可するテーブルの場合、YESに設定してください。既定値はNOです。  

![カスタムテーブル画面](img/table/table_detail9.png)

#### 添付ファイル使用
- テーブルのデータに、添付ファイルのアップロードを行わせたい場合には、YESに設定してください。既定値はYESです。  

![カスタムテーブル画面](img/table/table_detail10.png)


#### データ変更履歴使用
- テーブルのデータを、誰がどのような内容で更新したかどうかを、リビジョン（履歴）として管理したい場合に、YESに設定してください。既定値はYESです。  

![カスタムテーブル画面](img/table/table_detail12.png)

#### 変更履歴バージョン数
- 「データ変更履歴使用」がYESの場合、その変更履歴を保持しておくバージョン数を、整数で記入します。  
「200」と入力した場合、201回目の更新で、1回目の変更履歴情報は削除されます。  
既定値は100です。  

![カスタムテーブル画面](img/table/table_detail13.png)

#### すべてのユーザーが編集可能
- YESにした場合、すべてのユーザーが、このテーブルのすべてのデータを編集可能になります。個別に権限を振る必要がなくなります。既定値はNOです。  

![カスタムテーブル画面](img/table/table_detail14.png)

#### すべてのユーザーが閲覧可能
- YESにした場合、すべてのユーザーが、このテーブルのすべてのデータを閲覧可能になります。個別に権限を振る必要がなくなります。既定値はNOです。  
※インストール時のテーブルの場合、「お知らせ」テーブルが、「すべてのユーザーが閲覧可能」がYESになっています。これは、すべてのユーザーが、お知らせ情報を閲覧できるようにするためです。  
一方で、お知らせ情報を編集できるのは、管理者のみとなります。

![カスタムテーブル画面](img/table/table_detail15.png)

#### すべてのユーザーが参照可能
- YESにした場合、すべてのユーザーが、このテーブルのすべてのデータを参照可能になります。個別に権限を振る必要がなくなります。既定値はNOです。  
※「すべてのユーザーが参照可能」のみYESにした場合、そのテーブルは、メニューや一覧画面は表示できませんが、他のテーブルからの参照は可能になります。  
例えば「消費税」テーブルは、一般ユーザーは一覧画面を表示する必要はありませんが、選択肢として「消費税」を選択してもらう必要があります。このようなテーブルの場合、「すべてのユーザーが参照可能」をYESに設定してください。  

![カスタムテーブル画面](img/table/table_detail16.png)

#### メニューに追加する
- YESにした場合、新規追加後に、そのテーブルへのリンクをメニューに追加することができます。既定値はNOです。  
※テーブルを新規作成する場合のみ表示されます。保存後は、[メニュー](/ja/menu.md)画面にて設定を行ってください。  

![カスタムテーブル画面](img/table/table_detail17.png)

#### 追加先の親メニュー
- 「メニューに追加する」をYESにした場合表示されます。メニュー追加時に、親となるメニュー名を選択してください。  
例：「マニュアル」テーブルの新規作成において、親メニューに「管理者設定」を選択した場合、画像のように新規作成する「マニュアル」テーブルのメニューは、「管理者設定」の下に作成されます。

![カスタムテーブル画面](img/table/table_detail_other2.png)
![カスタムテーブル画面](img/table/table_detail_other3.png)

#### （※メニュー変更についてリンクさせて紹介）

## 権限
このテーブルにアクセスできるユーザー、または組織を管理します。  
この設定で保存したユーザー・組織に該当するユーザーのみ、このテーブルにアクセスできます。  
※ただし、メニューの「システム設定」で登録しているユーザー・組織も、このテーブルにアクセスできます。  
  
このテーブルにアクセス許可を行いたいユーザー・組織を、該当する権限の項目に、追加を行ってください。  

## 保存
設定を記入したら、「送信」をクリックしてください。  
テーブルが作成されます。

- テーブルを新規作成した場合、保存後、[カスタム列一覧画面](/ja/column.md)にリダイレクトします。  
そのまま、カスタム列の登録を行ってください。


## 編集
テーブル項目の編集を行いたい場合、該当するカスタムテーブル行の「編集」リンクをクリックしてください。  
![カスタムテーブル画面](img/table/table_edit.png)


## 削除
テーブルの削除を行いたい場合、該当するカスタムテーブル行の「削除」リンクをクリックしてください。  
![カスタムテーブル画面](img/table/table_delete.png)
**<span style="color: red; ">※ただし、システムでインストールしているテーブルは削除できません。</span>**