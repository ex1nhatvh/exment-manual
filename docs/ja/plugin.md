# プラグイン

## プラグインとは
Exmentでは、「プラグイン」という機能を備えています。  
Exmentが標準で備えている機能が、業務に不足している場合に、その拡張機能として、画面上からプログラムをアップロードすることで、機能を追加することができます。  
プラグインには現在、以下の種類があります。  

- [トリガー](#トリガー)
- [ページ](#ページ)
- [ドキュメント出力](#ドキュメント出力)
- [バッチ](#バッチ)
- [インポートテンプレート](#インポートテンプレート)
- [スクリプト](#スクリプト)
- [スタイル](#スタイル)

#### トリガー
Exmentの画面上で特定の操作を行った場合に実行され、値の更新などの処理を行うことができます。  
もしくは、一覧画面もしくはフォーム画面にボタンを追加し、クリック時に処理を行うことができます。  
特定の操作とは、以下の内容があります。  
- 保存直前：データの保存直前に、処理が起動します。  
- 保存後：データの保存後に、処理が起動します。  
- 一覧画面のメニューボタン：データ一覧画面の上部にボタンを追加し、クリック時にイベントを発生させます。  
- フォームのメニューボタン（新規作成時）：データの新規作成時の上部にボタンを追加し、クリック時にイベントを発生させます。  
- フォームのメニューボタン（更新時）：データの更新時の上部にボタンを追加し、クリック時にイベントを発生させます。  
※実装方法は[こちら](/ja/plugin_quickstart_trigger)をご参照ください。

#### ページ
> v2.1.0仕様変更します。

Exmentに新しい画面を作成することができます。  
既存の機能とは全く異なるページを使用する場合にご利用ください。  
※実装方法は[こちら](/ja/plugin_quickstart_page)をご参照ください。

#### ドキュメント出力
見積書や帳票など、独自のドキュメント資料を作成することができます。  
ドキュメントの元となるテンプレートはExcel形式で、出力もExcel形式で出力されます。  
※現在、PDF形式での出力は、技術的課題があり対応方針検討中です。  
※実装方法は[こちら](/ja/plugin_quickstart_document)をご参照ください。

#### バッチ
定期的な処理を、自動的に実行させたい場合に使用できます。  
ステータスの一括更新など、特定の処理を一度に実行したい場合にも使用できます。  
※実装方法は[こちら](/ja/plugin_quickstart_batch)をご参照ください。

#### インポートテンプレート
独自フォーマットのExcelファイルでインポートを行いたい場合に使用できます。  
※実装方法は[こちら](/ja/plugin_quickstart_import_templdate)をご参照ください。

#### スクリプト
> v2.1.0実装予定です。

独自のスクリプト(javascript)を実行することができます。  
現在対応しているのは、データ一覧画面表示時、データ詳細画面表示時、データ新規作成画面表示時・更新画面表示時です。  
※実装方法は[こちら](/ja/plugin_quickstart_script)をご参照ください。

#### スタイル
> v2.1.0実装予定です。

独自のスタイル(スタイルシート・css)を設定し、デザインを変更することができます。  
※実装方法は[こちら](/ja/plugin_quickstart_style)をご参照ください。


## 管理方法
### ページ表示
- 左メニューより、「プラグイン」を選択します。  
もしくは、以下のURLにアクセスしてください。  
http(s)://(ExmentのURL)/admin/plugin  
これにより、プラグイン画面が表示されます。  
![プラグイン画面](img/plugin/plugin_grid1.png)  

### プラグインアップロード
「ファイルを選択」をクリックし、作成したプラグインzipファイルを選択します。
その後、「アップロード」をクリックし、画面からアップロードします。  
![プラグイン画面](img/plugin/plugin_upload.png)  
完了すると、ページ下の一覧にプラグインの情報が表示されます。  

### プラグイン管理
プラグインの有効・無効、プラグインのトリガーや、ページのURIなどの情報を変更します。  
該当する行の「編集」リンクをクリックしてください。  
![プラグイン画面](img/plugin/plugin_edit1.png)  

これにより、プラグイン管理ページが表示されます。  
![プラグイン画面](img/plugin/plugin_edit2.png)  

### 管理項目

##### 有効フラグ
そのプラグインを、システムで使用するかどうかを切り替えます。  
YESにした場合有効になります。NOの場合無効になり、システムでは実行されません。  
※プラグインのアップロード時には、既定でYESになっています。ただし、プラグイン種類が「バッチ」の場合は、アップロード時には既定でNOになっています。

##### 対象テーブル
プラグインを実行する対象の、カスタムテーブルを指定します。  
設定したテーブルのページを表示した場合に、プラグインが実行されます。  

##### 実施トリガー
どの操作を行った場合に、プラグインを実行するかどうかを設定します。
設定した内容の操作を行った場合に、プラグインが実行されます。  

##### ボタンの見出し
「一覧画面のメニューボタン」もしくは「フォームのメニューボタン」を表示時に、ボタンに表示する見出しを設定します。

##### ボタンのアイコン
「一覧画面のメニューボタン」もしくは「フォームのメニューボタン」を表示時に、ボタンに表示するアイコンを設定します。

##### ボタンのクラス
「一覧画面のメニューボタン」もしくは「フォームのメニューボタン」を表示時に、ボタンのHTMLに付加するclassを設定します。

## プラグイン削除
プラグインの削除を行いたい場合には、一覧画面より、該当する行の「削除」リンクをクリックしてください。  
![プラグイン画面](img/plugin/plugin_delete.png)  
※「削除」を実施すると、プラグインのファイルそのものが削除されます。    
プラグインを一時的に無効にしたい場合、「有効フラグ」をNOに設定してください。  


## その他
プラグインの開発方法については、[プラグイン開発方法](/ja/plugin_quickstart.md)をご参照ください。