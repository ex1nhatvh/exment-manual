# Exment設定値一覧
Exment(ならびに関連ライブラリ)では、プロジェクトのフォルダ内にある「.env」ファイルを修正することで、内部の設定を変更することができます。  

## 設定方法
プロジェクトのフォルダより、「.env」ファイルを開き、以下のように追記を行ってください。  
※すでに同じ名前のキーが登録されている場合、値を書き換えてください。

~~~
#例1
EXMENT_API=false

#例2
EXMENT_FILTER_SEARCH_FULL=true
~~~

※「=」の前後にはスペースを入れないようにしてください。

## 設定を行っても反映されない場合
上記の設定を行っても反映されない場合、configファイルが古い場合があります。  
その場合、以下の手順を実施してください。

- プロジェクトのルートディレクトリを基準に、「vendor/exceedone/exment/config/exment.php」をコピーします。

- プロジェクトのルートディレクトリを基準に、「config/exment.php」に、上記ファイルを上書きます。

<span style="font-size:0.9em;">※システムから設定値を取得する時、「config/exment.php」の内容を取得する仕組みになっております。  
システムアップデート時に、「vendor/exceedone/exment/config/exment.php」に項目が追加される場合があります。しかし、「config/exment.php」ファイルも設定ファイルで、ユーザーが直接書き換える可能性もあるファイルなため、アップデートを行った場合でも、自動的に上書き処理は行わず、手動で上書きを行うような仕様となっております。  
※過去に、「config/exment.php」ファイルを編集していた場合、上書き後、編集した内容を再度「config/exment.php」に反映させるよう、お願いいたします。
</span>


## 設定値一覧

#### アプリケーション言語
- 設定キー : APP_LOCALE
- 既定値 ： en
- 役割 : アプリケーションで表示する言語です。日本語の場合は「ja」を記入してください。


#### タイムゾーン
- 設定キー : APP_TIMEZONE
- 既定値 ： UTC
- 役割 : アプリケーションで使用するタイムゾーンです。日本の場合は「Asia/Tokyo」を記入してください。

#### 「/admin」URL変更
- 設定キー : ADMIN_ROUTE_PREFIX
- 既定値 ： admin
- 役割 : Exmentを表示する際のパス名です。詳細は[こちら](/ja/quickstart_more?id=urlに含む「admin」の変更・削除)をご確認ください。


#### ダッシュボード行数
- 設定キー : EXMENT_DASHBOARD_ROWS
- 既定値 : 4
- 役割 : ダッシュボードに配置できる行数を変更します。  


#### マニュアルURL
- 設定キー : EXMENT_MANUAL_URL
- 既定値 : https://exment.net/docs/#/
- 役割 : ExmentのマニュアルURLを設定します。


#### 更新履歴デフォルト値
- 設定キー : EXMENT_REVISION_COUNT
- 既定値 : 100
- 役割 : データ保存時に保持する更新履歴の、デフォルト値です。新規にテーブルを作成する際に使用します。


#### MySQLパス
- 設定キー : EXMENT_MYSQL_BIN_DIR
- 既定値 : (なし)
- 役割 : mysqlコマンドのパスです。特に指定がない場合、環境変数PATHが通っているものとします。


### ログイン
#### デフォルトログインプロバイダ表示
- 設定キー : EXMENT_SHOW_DEFAULT_LOGIN_PROVIDER
- 既定値 : true
- 役割 : ExmentのID・パスワードを使用したログインフォームを表示するかどうかを切り替えます。シングルサインオンを使用する場合に設定が有効になります。詳細は[こちら](/ja/quickstart_more?id=シングルサインオン)をご確認ください。

#### SSOログインプロバイダ文字列
- 設定キー : EXMENT_LOGIN_PROVIDERS
- 既定値 : (なし)
- 役割 : SSOで使用するプロバイダ名一覧を、カンマ区切りで設定します。詳細は[こちら](/ja/quickstart_more?id=シングルサインオン)をご確認ください。


#### ログイン失敗回数計測
- 設定キー : EXMENT_THROTTLE
- 既定値 : true
- 役割 : trueの場合、ログイン失敗が一定回数続いた場合に、一定時間経過するまでログインできなくなります。  

#### ログイン失敗回数
- 設定キー : EXMENT_MAX_ATTEMPTS
- 既定値 : 5
- 役割 : 一定時間ログインできなくなるまでの、ログイン失敗の回数です。  

#### ログイン失敗回復時間(分)
- 設定キー : EXMENT_DECAY_MINUTES
- 既定値 : 60
- 役割 : ログインできなくなった場合に、再度ログインできるようになるまでの時間(分)です。 


### 検索
#### 検索時全文一致
- 設定キー : EXMENT_FILTER_SEARCH_FULL
- 既定値 : false
- 役割 : データ検索時に、全文一致とするかどうかです。trueの場合は全文一致、falseの場合は前方一致です。詳細は[こちら](/ja/search?id=補足データ検索を部分一致に切り替え)をご確認ください。


#### 検索画面から一覧画面へ遷移時の、フィルタ有無
- 設定キー : EXMENT_SEARCH_LIST_LINK_FILTER
- 既定値 : true
- 役割 : trueにすると、データ検索画面から、データ一覧画面へ移動時に、入力した検索条件をフィルタとして維持したまま、一覧表示を行うことができます。


#### キーワード検索最大件数
- 設定キー : EXMENT_KEYWORD_SEARCH_COUNT
- 既定値 : 1000
- 役割 : キーワード検索時に、1つのテーブルあたりに取得する最大件数です。


#### 関連データ検索最大件数
- 設定キー : EXMENT_KEYWORD_SEARCH_RELATION_COUNT
- 既定値 : 5000
- 役割 : 関連データ検索時に、1つのテーブルあたりに取得する最大件数です。


### メール設定
#### メール設定値をenvファイルより使用
- 設定キー : EXMENT_MAIL_SETTING_ENV_FORCE
- 既定値 : false
- 役割 : trueにすると、メール設定を、.envファイルの設定から使用します。  
(falseの場合、システム設定画面で記入した設定値を使用します。)

#### メール連続通知無視時間(分)
- 設定キー : EXMENT_NOTIFY_SAVED_SKIP_MINUTES
- 既定値 : 5
- 役割 : データ新規作成・更新でのメール通知時、同一のデータの連続した更新では、2件目以降のメールはスキップされます。その連続した通知の件数を判定するための時間(分)です。

#### メールの添付ファイル暗号化
- 設定キー : EXMENT_ARCHIVE_MAIL_ATTACHMENT
- 既定値 : false
- 役割 : trueにすることで、画面からメールで添付ファイルを送信する場合に、添付ファイルをzip暗号化し送信します。  
復号化パスワードは別途送信されます。

### API

#### API有効・無効
- 設定キー : EXMENT_API
- 既定値 ： false
- 役割 : trueにすることで、ExmentのAPIを使用することができます。詳細は[こちら](/ja/api)をご確認ください。

#### APIの標準取得件数
- 設定キー : EXMENT_API_DEFAULT_DATA_COUNT
- 既定値 ： 20
- 役割 : APIのデータ一覧取得で、countを未使用のときのデータ取得件数です。

#### APIの一括新規作成件数上限
- 設定キー : EXMENT_API_MAX_CREATE_COUNT
- 既定値 ： 100
- 役割 : APIの一括新規作成で、同時に新規作成できる最大件数です。


### 一覧(グリッド)

#### 行クリック時の画面遷移無効
- 設定キー : EXMENT_GRIDROW_SELECT_DISABLED
- 既定値 : false
- 役割 : trueにすることで、一覧画面の行をクリックしたときの画面遷移が無効になります。

#### 行クリック時の画面遷移無効
- 設定キー : EXMENT_GRIDROW_SELECT_EDIT
- 既定値 : false
- 役割 : trueにすることで、一覧画面の行をクリックしたとき、データ編集画面に遷移します。（既定はデータ詳細画面です。）


### その他

#### ユーザービュー無効
- 設定キー : EXMENT_USER_VIEW_DISABLED
- 既定値 : false
- 役割 : trueにすることで、一般ユーザーがユーザービューを作成できなくなります。

#### ユーザーダッシュボード無効
- 設定キー : EXMENT_USER_DASHBOARD_DISABLED
- 既定値 : false
- 役割 : trueにすることで、一般ユーザーがユーザーダッシュボードを作成できなくなります。

#### 組織一覧ページで階層表示を行う
- 設定キー : EXMENT_SHOW_ORGANIZATION_TREE
- 既定値 : false
- 役割 : trueにすることで、組織一覧ページで、組織の階層表示が出来るようになります。

#### パスワードポリシーを適用する
- 設定キー : EXMENT_PASSWORD_POLICY
- 既定値 : false
- 役割 : trueにすることで、パスワードの複雑性、有効日数、最近使用した履歴との比較件数、などを設定出来るようになります。

#### データ詳細画面で「隠しフィールド」を非表示にする
- 設定キー : EXMENT_HIDE_HIDDENFIELD
- 既定値 : false
- 役割 : trueにすることで、データ詳細画面で、フォーム設定で「隠しフィールド」になっているデータを非表示にします。

#### 添付ファイルを、アップロード者以外が削除できないようにする
- 設定キー : EXMENT_FILE_DELETE_USERONLY
- 既定値 : false
- 役割 : trueにすることで、データ詳細画面でアップロードされているファイルは、アップロード者以外は削除できないようになります。

### デバッグ・開発者向け

#### エキスパートモード
- 設定キー : EXMENT_EXPART_MODE
- 既定値 ： false
- 役割 : trueにすることで、より柔軟で、システムに詳しい方向けの設定を行うことができるようになります。


#### デバッグモード(SQLログ出力)
- 設定キー : EXMENT_DEBUG_MODE
- 既定値 ： false
- 役割 : trueにすることで、ExmentでSQLを実行時、SQL文をログ出力することができます。※開発用です。


#### デバッグモード(SQLログ出力 - 関数表示)
- 設定キー : EXMENT_DEBUG_MODE_SQLFUNCTION
- 既定値 ： false
- 役割 : ExmentでSQLを実行時で、「EXMENT_DEBUG_MODE」がtrueのときに、trueにすることで、SQL文と同時に、呼び出し元の関数一覧をログ出力することができます。※開発用です。
